<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hacktop OS</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link id="favicon" rel="icon" href="favicon.png">
<style>
:root{--bg:#000; --panel:#001a00; --fg:#00ff66; --border:#00ff66;}
.theme-green{--bg:#000;--panel:#001a00;--fg:#00ff66;--border:#00ff66;}
.theme-blue{--bg:#000814;--panel:#001a33;--fg:#33aaff;--border:#33aaff;}
.theme-red{--bg:#140000;--panel:#260000;--fg:#ff4444;--border:#ff4444;}

body{margin:0;background:var(--bg);color:var(--fg);font-family:monospace;height:100vh;display:flex;flex-direction:column;overflow:hidden;}
#header{text-align:center;padding:10px;border-bottom:2px solid var(--border);font-size:22px;}
#terminalWrap{flex:1;display:flex;flex-direction:column;padding:10px;overflow:hidden;}
#terminal{flex:1;overflow-y:auto;white-space:pre-wrap;}
#inputBar{border-top:2px solid var(--border);padding:8px;}
#cmd{width:100%;background:black;color:var(--fg);border:none;outline:none;font-size:16px;}

#taskbar{height:50px;background:var(--panel);border-top:2px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0 10px;}
#launcher{width:36px;height:36px;border:none;background:url('favicon.png') no-repeat center/contain;cursor:pointer;border-radius:6px;}
#launcher:hover{filter:brightness(1.2);}
#appbar{display:flex;align-items:center;gap:12px;}
#appbar button{background:transparent;border:none;color:var(--fg);font-size:22px;cursor:pointer;padding:4px 6px;border-radius:6px;}
#appbar button:hover{background:var(--fg);color:var(--panel);transform:scale(1.2);transition:0.2s;}
#status{display:flex;align-items:center;gap:12px;}
#battery{display:flex;align-items:center;gap:4px;}
#batteryBox{width:22px;height:12px;border:2px solid var(--fg);}
#batteryFill{height:100%;width:60%;background:var(--fg);}
#batteryTip{width:3px;height:6px;background:var(--fg);}

.window{position:absolute;top:90px;left:90px;width:280px;background:var(--panel);border:2px solid var(--border);padding:8px;z-index:10;cursor:move;}
.close{float:right;cursor:pointer;}
.hidden{display:none;}

/* Launcher Menu */
#launcherMenu{position:absolute;bottom:50px;left:10px;width:220px;background:var(--panel);border:2px solid var(--border);padding:6px;display:none;flex-direction:column;gap:6px;z-index:1000;border-radius:6px;}
#launcherMenu button{background:transparent;border:none;color:var(--fg);text-align:left;padding:4px 6px;cursor:pointer;border-radius:4px;}
#launcherMenu button:hover{background:var(--fg);color:var(--panel);}
input[type="range"]{width:100%;}
</style>
</head>
<body class="theme-green">

<div id="header">Hacking Terminal</div>
<div id="terminalWrap">
  <div id="terminal"></div>
  <div id="inputBar"><input id="cmd" placeholder="booting..." disabled></div>
</div>

<div id="taskbar">
  <button id="launcher" onclick="toggleLauncher()"></button>
  <div id="appbar">
    <button onclick="openApp('files')">ğŸ“</button>
    <button onclick="openApp('calc')">ğŸ§®</button>
    <button onclick="openApp('about')">ğŸ–¥ï¸</button>
    <button onclick="openApp('settings')">âš™ï¸</button>
    <button onclick="openApp('notes')">ğŸ“</button>
    <button onclick="openApp('weather')">ğŸŒ¤ï¸</button>
  </div>
  <div id="status">
    <span id="clock"></span>
    <div id="battery">
      <div id="batteryBox"><div id="batteryFill"></div></div>
      <div id="batteryTip"></div>
      <span id="batteryPct">60%</span>
    </div>
  </div>
</div>

<!-- Launcher Menu -->
<div id="launcherMenu">
  <button onclick="openApp('files')">ğŸ“ Files</button>
  <button onclick="openApp('calc')">ğŸ§® Calculator</button>
  <button onclick="openApp('about')">ğŸ–¥ï¸ System</button>
  <button onclick="openApp('settings')">âš™ï¸ Settings</button>
  <button onclick="openApp('notes')">ğŸ“ Notes</button>
  <button onclick="openApp('weather')">ğŸŒ¤ï¸ Weather</button>
  <hr>
  <button onclick="setTheme('theme-green')">ğŸŸ¢ Green</button>
  <button onclick="setTheme('theme-blue')">ğŸ”µ Blue</button>
  <button onclick="setTheme('theme-red')">ğŸ”´ Red</button>
  <hr>
  <button onclick="saveData()">ğŸ’¾ Save</button>
</div>

<!-- APP WINDOWS -->
<div id="files" class="window hidden"><span class="close" onclick="closeApp('files')">âœ–</span>
<b>File Explorer</b><br><br><div id="fileList"></div>
</div>
<div id="calc" class="window hidden"><span class="close" onclick="closeApp('calc')">âœ–</span>
<b>Calculator</b><br><br><input id="calcIn" style="width:100%"><button onclick="doCalc()">=</button><div id="calcOut"></div>
</div>
<div id="about" class="window hidden"><span class="close" onclick="closeApp('about')">âœ–</span>
<b>System Info</b><br><br>FakeOS v5<br>Status: Stable
</div>
<div id="settings" class="window hidden"><span class="close" onclick="closeApp('settings')">âœ–</span>
<b>Settings & Cheats</b><br><br>
<label>Brightness: <span id="brightnessVal">100</span>%</label>
<input type="range" id="brightness" min="10" max="200" value="100" oninput="updateBrightness(this.value)"><br><br>
<label>Contrast: <span id="contrastVal">100</span>%</label>
<input type="range" id="contrast" min="50" max="200" value="100" oninput="updateContrast(this.value)"><br><br>
<label>Terminal Font Size: <span id="fontVal">16</span>px</label>
<input type="range" id="fontsize" min="10" max="30" value="16" oninput="updateFontSize(this.value)"><br><br>
<b>Cheats:</b><br>
<input type="checkbox" id="cheatTrace" onchange="toggleCheat('trace')"> Unlimited Trace<br>
<input type="checkbox" id="cheatHack" onchange="toggleCheat('hack')"> Instant Hack
</div>
<div id="notes" class="window hidden"><span class="close" onclick="closeApp('notes')">âœ–</span>
<b>Notes</b><br><br><textarea id="notesText" style="width:100%;height:150px"></textarea>
</div>
<div id="weather" class="window hidden"><span class="close" onclick="closeApp('weather')">âœ–</span>
<b>Weather</b><br><br>Current weather: ğŸŒ¤ï¸ Sunny<br>Temperature: 72Â°F
</div>

<script>
// VARIABLES
const terminal=document.getElementById("terminal");
const input=document.getElementById("cmd");
const header=document.getElementById("header");
const launcher=document.getElementById("launcher");
const launcherMenu=document.getElementById("launcherMenu");

let waitingName=true,isAdmin=false,username="user",connected=false,trace=0,startTime=Date.now();
let cheats={trace:false,hack:false};
let downloads={}, notesText="";

// PREMADE FILES
const availableFiles=[
  {name:"secret.txt", content:"TOP SECRET: Agent 47 infiltrated the server."},
  {name:"codes.key", content:"Access Code: ZX-42-99-YT"},
  {name:"mission.log", content:"Mission completed: Infiltrated and retrieved the prototype."},
  {name:"data.db", content:"Database Dump: {users:1024, status:active, lastLogin:today}"},
  {name:"passwords.txt", content:"Passwords: admin123, qwerty987, letmein!"}
];

// LOAD LOCAL STORAGE
if(localStorage.getItem("downloads")) downloads=JSON.parse(localStorage.getItem("downloads"));
if(localStorage.getItem("notesText")) notesText=localStorage.getItem("notesText");
document.getElementById("notesText").value=notesText;

// BOOT
const boot=["Booting Hacking Terminal...","Loading modules...","Initializing UI...","System ready.","","Enter username: name <yourname>"];
let bi=0;
const bootInt=setInterval(()=>{print(boot[bi++]);if(bi>=boot.length){clearInterval(bootInt);input.disabled=false;input.placeholder="type command...";}},500);

// TERMINAL FUNCTIONS
function print(t){terminal.textContent+=t+"\n";terminal.scrollTop=terminal.scrollHeight}
function prompt(){return (isAdmin?"ADMIN":"user")+"@terminal> "}

// COMMAND HANDLER
input.addEventListener("keydown",e=>{
  if(e.key!=="Enter") return;
  const raw=input.value.trim(); input.value="";
  if(!raw) return;
  const cmd=raw.toLowerCase();
  print(prompt()+raw);

  if(waitingName){
    if(cmd.startsWith("name ")){username=raw.slice(5);waitingName=false;
      if(username==="admin"){isAdmin=true;header.textContent="ADMIN Hacking Terminal";document.title="Admin Hacking Terminal";}
      print("ACCESS GRANTED"); print("Type help"); connected=false;
    }
    return;
  }

  switch(cmd){
    case "help":
      print("whoami, date, time, uptime\nls, cat <file>, download <file>, connect\nnetworkmap, mission, credits, clear");
      if(isAdmin) print("ADMIN: shutdown, override, nuke, beat");
      break;
    case "whoami": print(username); break;
    case "date": print(new Date().toDateString()); break;
    case "time": print(new Date().toLocaleTimeString()); break;
    case "uptime": print(Math.floor((Date.now()-startTime)/1000)+"s"); break;
    case "trace": trace+=cheats.trace?100:10; print("TRACE LEVEL: "+trace+"%"); break;
    case "trace reset": trace=0; print("TRACE RESET"); break;
    case "connect": connected=true; print("Connected to server! You can now download files."); break;
    case "ls":
      print("Available files to download:");
      availableFiles.forEach(f=>print(`- ${f.name}`));
      print("\nDownloaded files:");
      Object.keys(downloads).forEach(f=>print(`- ${f}`));
      break;
    case "clear": terminal.textContent=""; break;
    default:
      if(cmd.startsWith("echo ")) print(raw.slice(5));
      else if(cmd.startsWith("ping ")) print("Pinging "+raw.slice(5)+"... OK");
      else if(cmd.startsWith("cat ")){
        let f=raw.slice(4).trim(); 
        if(downloads[f]) print(`Reading ${f}...\n${downloads[f]}`);
        else print("File not found.");
      }
      else if(cmd.startsWith("download ")){
        if(!connected){print("Error: Not connected to server."); return;}
        let fname=raw.slice(9).trim();
        const fileObj=availableFiles.find(f=>f.name===fname);
        if(!fileObj){print("File not found."); return;}
        downloads[fname]=fileObj.content;
        print(`Downloading ${fname}... DONE`);
        updateFileExplorer();
      }
      else if(isAdmin){
        if(cmd==="shutdown"){print("SYSTEM SHUTDOWN");}
        else if(cmd==="override"){print("SECURITY OVERRIDDEN");}
        else if(cmd==="nuke"){print("ğŸ’¥ SYSTEM DESTROYED");}
        else if(cmd==="beat"){terminal.textContent=""; print("===== YOU WON =====");}
        else print("Unknown command");
      } else print("Unknown command");
  }
});

// UI FUNCTIONS
function openApp(id){document.getElementById(id).classList.remove("hidden")}
function closeApp(id){document.getElementById(id).classList.add("hidden")}
function doCalc(){document.getElementById("calcOut").textContent=eval(document.getElementById("calcIn").value)}
function toggleLauncher(){launcherMenu.style.display = launcherMenu.style.display==="flex" ? "none" : "flex";}
function setTheme(t){document.body.className=t;}

// SETTINGS
function updateBrightness(v){document.getElementById('brightnessVal').textContent=v; document.body.style.filter=`brightness(${v}%) contrast(${document.getElementById('contrast').value}%)`;}
function updateContrast(v){document.getElementById('contrastVal').textContent=v; document.body.style.filter=`brightness(${document.getElementById('brightness').value}%) contrast(${v}%)`;}
function updateFontSize(v){document.getElementById('fontVal').textContent=v; document.getElementById('terminal').style.fontSize=v+"px";}
function toggleCheat(type){cheats[type] = !cheats[type];}

// CLOCK & BATTERY
setInterval(()=>{document.getElementById("clock").textContent=new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});},1000);
let pct=60,charging=false;
setInterval(()=>{pct+=charging?1:-1;if(pct<=20) charging=true;if(pct>=100) charging=false;document.getElementById("batteryFill").style.width=pct+"%";document.getElementById("batteryPct").textContent=pct+"%"+(charging?" âš¡":"");},1500);

// DRAGGABLE WINDOWS
document.querySelectorAll(".window").forEach(win=>{
  let offsetX=0,offsetY=0,isDragging=false;
  win.addEventListener("mousedown",e=>{if(e.target.classList.contains("close")) return;isDragging=true;offsetX=e.clientX-win.offsetLeft;offsetY=e.clientY-win.offsetTop;win.style.zIndex=1000;});
  document.addEventListener("mousemove",e=>{if(!isDragging) return; win.style.left=(e.clientX-offsetX)+"px"; win.style.top=(e.clientY-offsetY)+"px";});
  document.addEventListener("mouseup",e=>{isDragging=false;});
});

// FILE EXPLORER
function updateFileExplorer(){
  const fileList=document.getElementById("fileList");
  fileList.innerHTML="";
  Object.keys(downloads).forEach(f=>{
    const div=document.createElement("div");
    div.textContent=f;
    div.style.cursor="pointer";
    div.onclick=()=>print(`Reading ${f}...\n${downloads[f]}`);
    fileList.appendChild(div);
  });
}

// SAVE FUNCTION
function saveData(){
  localStorage.setItem("downloads", JSON.stringify(downloads));
  localStorage.setItem("notesText", document.getElementById("notesText").value);
  alert("ğŸ’¾ Data saved!");
}
</script>
</body>
</html>
